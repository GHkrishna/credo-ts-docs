"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2574],{3905:function(e,t,n){n.d(t,{Zo:function(){return g},kt:function(){return p}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},g=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,l=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),d=u(n),p=o,f=d["".concat(l,".").concat(p)]||d[p]||c[p]||s;return n?r.createElement(f,a(a({ref:t},g),{},{components:n})):r.createElement(f,a({ref:t},g))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,a=new Array(s);a[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,a[1]=i;for(var u=2;u<s;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6503:function(e,t,n){n.r(t),n.d(t,{assets:function(){return g},contentTitle:function(){return l},default:function(){return p},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return c}});var r=n(7462),o=n(3366),s=(n(7294),n(3905)),a=["components"],i={},l="Using PostgreSQL as Database in Node.js",u={unversionedId:"tutorials/postgres-database-nodejs/index",id:"tutorials/postgres-database-nodejs/index",title:"Using PostgreSQL as Database in Node.js",description:"By default the Indy SDK will use an SQLite database for storage. In mobile environments this is sufficient and allows us to keep storage local to the device, but in server environments we oftentimes want a more scalable storage solution. By leveraging the PostgreSQL plugin for Indy SDK we can use PostgreSQL as a storage solution instead of SQLite.",source:"@site/guides/tutorials/postgres-database-nodejs/index.md",sourceDirName:"tutorials/postgres-database-nodejs",slug:"/tutorials/postgres-database-nodejs/",permalink:"/guides/tutorials/postgres-database-nodejs/",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Issue a credential",permalink:"/guides/tutorials/issue-a-credential"},next:{title:"Postgres Setup for Linux",permalink:"/guides/tutorials/postgres-database-nodejs/linux"}},g={},c=[{value:"Installation of the Postgres Plugin",id:"installation-of-the-postgres-plugin",level:2},{value:"Using the Postgres Plugin in AFJ",id:"using-the-postgres-plugin-in-afj",level:2}],d={toc:c};function p(e){var t=e.components,n=(0,o.Z)(e,a);return(0,s.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"using-postgresql-as-database-in-nodejs"},"Using PostgreSQL as Database in Node.js"),(0,s.kt)("p",null,"By default the Indy SDK will use an SQLite database for storage. In mobile environments this is sufficient and allows us to keep storage local to the device, but in server environments we oftentimes want a more scalable storage solution. By leveraging the PostgreSQL plugin for Indy SDK we can use PostgreSQL as a storage solution instead of SQLite."),(0,s.kt)("p",null,"This document describes the installation process of the Postgres plugin for IndySDK and how you need to configure AFJ to use it."),(0,s.kt)("h2",{id:"installation-of-the-postgres-plugin"},"Installation of the Postgres Plugin"),(0,s.kt)("p",null,"For installation of the Postgres plugin, please refer to the platform specific guides:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/guides/tutorials/postgres-database-nodejs/macos"},"macOS")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/guides/tutorials/postgres-database-nodejs/linux"},"Linux")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/guides/tutorials/postgres-database-nodejs/windows"},"Windows"))),(0,s.kt)("h2",{id:"using-the-postgres-plugin-in-afj"},"Using the Postgres Plugin in AFJ"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-ts"},"import { Agent, InitConfig } from '@aries-framework/core'\nimport { agentDependencies, IndyPostgresStorageConfig, loadPostgresPlugin, WalletScheme } from '@aries-framework/node'\n\n// IndyPostgresStorageConfig defines interface for the Postgres plugin configuration.\nconst storageConfig: IndyPostgresStorageConfig = {\n  type: 'postgres_storage',\n  config: {\n    url: 'localhost:5432',\n    wallet_scheme: WalletScheme.DatabasePerWallet,\n  },\n  credentials: {\n    account: 'postgres',\n    password: 'postgres',\n    admin_account: 'postgres',\n    admin_password: 'postgres',\n  },\n}\n\n// load the postgres wallet plugin before agent initialization\nloadPostgresPlugin(storageConfig.config, storageConfig.credentials)\n\nconst agentConfig: InitConfig = {\n  label: 'My Agent',\n  // walletConfig.id and walletConfig.key are still required\n  walletConfig: {\n    id: 'walletId',\n    key: 'testKey0000000000000000000000000',\n    // storage is added and defines the postgres plugin configuration\n    storage: storageConfig,\n  },\n}\n\nconst agent = new Agent({\n  config: agentConfig,\n  dependencies: agentDependencies,\n})\n")))}p.isMDXComponent=!0}}]);